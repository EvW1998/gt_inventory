#GT库存 国泰肯德基库存管理程序

##开发所属：国泰肯德基 王智健
##联系邮箱：ew98@foxmail.com

##v1.0.0 2020-02-09

##个人信息：
###用户登录：
####- 基于微信账号。
####- 进入微信小程序，未登录用户会跳转到个人信息页面。点击页面上方授权登录按钮，使用微信账号登录。

    用户注册：
        - 基于微信账号。
        - 未登录未注册用户会在授权登录后自动进入注册界面。
        - 已登录未注册用户在个人信息界面可点击注册信息按钮进入注册界面。
        - 注册需要输入用户姓名，必须为中文姓名。用户姓名在提交后自己无法更改，只能由权限大于此用户的管理人员进行更改。
        - 注册需要邀请码。GT库存为企业内部管理程序，仅限内部员工使用。
        - 注册成功后权限为0级，调整等级需要由权限大于此用户的管理人员进行更改。

    用户权限：
        - 0级：刚完成注册用户，无法进入前台库存和参数设置界面。
        - 1级：普通员工，只能进入前台库存界面，进行补货操作。
        - 2级：普通管理人员，可进入前台库存和参数设置界面，进行补货和管理。
        - 3级：程序管理员，可进入前台库存和参数设置界面，并对2级管理人员进行管理。
        - 在个人信息页面，点击下方灰色版本信息，可进入用户升级界面，输入密码可提升用户权限至3级。

    - 在个人信息界面可看到用户姓名，微信openid，在GT库存中的id，和权限等级。
    - 下拉可刷新个人信息。

参数设置：
    员工管理：
        - 可对权限等级小于此用户的所有用户进行管理，点击员工姓名进行管理，必须为中文姓名。
        - 可对员工姓名进行更改，不可为空。
        - 可对员工权限进行更改，只能在小于此用户等级的范围内调整。

    品类管理：
        - 点击屏幕上方添加新品类，输入名称后提交。
        - 选择品类名称对该品类进行管理。
        - 点击编辑按钮对品类名称进行更改，或删除。删除品类会连带删除品类下所有子品项和所有子品项的用量记录。
        - 点击新增子品项按钮添加新的子品项。
            新增子品项：
                - 所有项均为必填项。
                - 默认补货量应为正整数，代表此子品项的每日默认补货量。
                - 备货率应为正数，不必为整数，代表此子品项在前台备几日的量。
                - 现有库存应为正数，不必为整数，并且不能大于最大库存容量，代表此子品项的前台现有量。
                - 最大库存容量应为正整数，并且不小于默认补货量乘备货率，代表此子品质在前台最大放置量。
        - 点击子品项名称对该子品项进行更改，每项要求与新增子品项的要求一致。
        - 点击子品项名称可对该子品项进行删除，删除子品项会连带删除该子品项的用量记录。

    营业额管理：
        - 点击屏幕上方添加新营业额按钮来新增记录，营业额不可为负数，默认日期为当天日期，点击可进行更改。
        - 点击营业额可对该日营业额数进行修改，或者删除。

    查看余量确认记录：
        - 可查看所有余量确认记录。
        - 点击条目可查看具体信息，具体信息中异常项会用红色字体标记。

    查看补货确认记录：
        - 可查看所有补货确认记录。
        - 点击条目可查看具体信息，具体信息中异常项会用红色字体标记。

    清除品项异常标记：
        - 在员工进行补货后，对补货量少于预计量的子品项会标记为异常项，在前台库存页面会显示为红色背景。
        - 点击清除后，会清除掉所有异常标记。

    接收余量消息提醒：
        - 点击后允许对此用户发生余量统计完成通知。
        - 在员工完成统计后，会尝试向所有权限等级大于1的管理人员推送通知，管理人员可在微信消息的服务通知中查看。
        - 管理人员必须点击同意接收通知后才能收到通知，且点击一次只能接收一次通知。
        - 通知中包含完成时间，完成人，正常统计的品项数，未进行统计的品项数，和备注信息。

    接收补货消息提醒：
        - 点击后允许对此用户发生补货完成通知。
        - 在员工完成补货后，会尝试向所有权限等级大于1的管理人员推送通知，管理人员可在微信消息的服务通知中查看。
        - 管理人员必须点击同意接收通知后才能收到通知，且点击一次只能接收一次通知。
        - 通知中包含完成时间，完成人，正常补货的品项数，异常补货的品项数，和备注信息。

前台库存：
    - 在余量库存界面可看到所有的品类和所属子品项，及子品项的前台存量。
    - 下拉可刷新库存信息。
    - 员工需先点击余量按钮，对前台余量进行统计后，才可点击补货按钮，进行补货。
        余量确认：
            - 每日早上8点之前的余量确认，会登记为昨日用量。8点后的操作会登记为当日用量。
            - 用户在每个子品项行中输入此品项的库存剩余量，未输入剩余量的品项会默认剩余量为存量。
            - 剩余量必须为非负数，且不能大于存量。
            - 剩余量与存量的差值，将登记为该品项的日用量，并更新周用量和月用量。 
            - 确认完成后会更新存量为剩余量，推送通知，并可开始补货操作。
    - 员工在余量统计完成后，可点击补货按钮进行补货。
        补货确认：
            - 每个子品项会显示建议补货量。
            - 建议补货量通过昨日销售额与今日销售额的比率，乘以昨日用量得出，并取大于等于计算值的最小整数。
            - 如无昨日或今日销售额，建议量为该品项的默认补货量。
            - 如该品项无昨日用量，建议量为该品项的默认补货量。
            - 如建议补货量加存量会超出最大库存量，建议补货量为最大库存量减去存量，并向下取小于或等于计算值的最大整数。
            - 用户在每个子品项行中输入此品项的实际补货量，未输入实际补货量的品项会默认实际补货量为0。
            - 实际补货量必须为非负整数，且不能使实际补货量加存量大于最大库存量。
            - 如实际补货量小于建议补货量，则该品项会被标记为异常项。
            - 确认完成后会更新存量为存量加实际补货量，和推送通知。
