<!--pages/manage/productManage/productModify/productModify.wxml-->

<view class="page">
    <view class="weui-form">
        <view class="weui-form__text-area">
            <view class="weui-form__title">查看或修改在售产品</view>
            <view class="weui-form__desc">在售产品名称及所用材料</view>
        </view>

        <form bindsubmit="formSubmit">
            <view class="weui-form__control-area">
                <view class="weui-cells__group weui-cells__group_form">
                    <view class="weui-cells__title">产品信息</view>
                    <view class="weui-cells weui-cells_form weui-cells_after-title">
                        <view class="{{warn_enable ? 'weui-cell weui-cell_warn' : 'weui-cell'}}">
                            <view class="weui-cell__hd"><label class="weui-label">名称</label></view>
                            <view class="weui-cell__bd">
                                <input class="weui-input" name="name" type="text" bindinput="nameInput" value="{{product.product_name}}" placeholder="请输入产品名称"/>
                            </view>
                            <view wx:if="{{warn_enable}}" class="weui-cell__ft">
                                <icon type="warn" size="23" color="#E64340"></icon>
                            </view>
                        </view>
                    </view>
                </view>

                <view class="weui-cells__group weui-cells__group_form">
                    <view class="weui-cells__title">所用材料</view>
                    <view class="weui-cells weui-cells_form weui-cells_after-title">
                        <block wx:for="{{picked_item}}" wx:key="_id">
                            <view class="weui-cell">
                                <view class="weui-cell__hd">
                                    <label id="{{item._id}}" class="weui-label red_label" bindtap="deleteItem">删除</label>
                                </view>

                                <view class="weui-cell__bd">
                                    <text>{{item_key_id[item.item_id].item_name}}</text>
                                </view>
                            </view>
                        </block>

                        <view class="weui-cell">
                            <view class="weui-cell__hd weui-cell_link">
                                <picker mode="multiSelector" bindchange="addItem" bindcolumnchange="changePicker" value="{{multiIndex}}" range="{{multiArray}}" disabled="{{!set_picker}}">
                                    <label class="{{set_picker ? 'weui-label' : 'weui-label grey_label'}}">添加材料</label>
                                </picker>
                            </view>
                        </view>
                    </view>
                </view>
            </view>

            <view class="weui-form__tips-area">
                <view class="weui-form__tips">点击确定修改产品</view>
            </view>

            <view class="weui-form__opr-area">
                <button type="primary" form-type="submit" disabled="{{!button_enable}}">确定</button>
            </view>
        </form>
    </view>
</view>


